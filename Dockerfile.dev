# ğŸ Imagen base ligera de Python
FROM python:3.11-slim

# ğŸ”§ Variables de entorno bÃ¡sicas
ENV PYTHONDONTWRITEBYTECODE 1
ENV PYTHONUNBUFFERED 1

# ğŸ“ Crear directorio de trabajo
WORKDIR /app

# ğŸ§© Instalar dependencias del sistema necesarias para psycopg2 y compilaciÃ³n
RUN apt-get update && apt-get install -y \
    build-essential \
    libpq-dev \
    && rm -rf /var/lib/apt/lists/*

# ğŸ§° Copiar requirements.txt desde la raÃ­z
COPY requirements.txt /app/requirements.txt

# ğŸ Instalar dependencias
RUN pip install --no-cache-dir -r /app/requirements.txt

# ğŸ§  Copiar todo el cÃ³digo del backend (solo la carpeta /backend)
COPY backend /app

# ğŸš€ Comando por defecto: iniciar servidor Django en modo desarrollo
CMD ["python", "manage.py", "runserver", "0.0.0.0:8000"]
